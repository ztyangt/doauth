import{d as E,a8 as h,ae as w,z as _,k as f,w as o,o as v,h as t,j as a,m as S,a3 as V,R,g as C,a7 as N,a6 as B,aA as A,aa as F,av as I,ab as T,X as z}from"./index-7fb70b78.js";import{E as $}from"./card-27d98d03.js";import{E as j,a as q,_ as D}from"./select-29390fe3.js";import{E as M,a as O}from"./form-item-b97c02fb.js";import"./tag-24bfc22c.js";const X=C("h3",null,"站点信息",-1),Q=E({__name:"user",setup(G){const b=h(),{user:e}=w(b),i=_(),r=_(!1),m={handleSave:async()=>{if(e.value){r.value=!0;const s=await N.update(e.value.id,e.value.email,e.value.nickname,e.value.gender,e.value.description,e.value.avatar);B(s),r.value=!1}},handleUpload:s=>{i.value=s,document.querySelector("#uploadRef").click()},uploadSuccess:s=>{A(e,i.value,s)}};return(s,l)=>{const u=F,d=M,g=I,p=j,k=q,x=O,c=T,U=D,y=$;return v(),f(y,{class:"box-card cus-box-card",shadow:"hover"},{header:o(()=>[X]),default:o(()=>[t(e)?(v(),f(x,{key:0,style:{"max-width":"800px"}},{default:o(()=>[a(d,{label:"昵称"},{default:o(()=>[a(u,{modelValue:t(e).nickname,"onUpdate:modelValue":l[0]||(l[0]=n=>t(e).nickname=n),placeholder:"请输入你的昵称"},null,8,["modelValue"])]),_:1}),a(d,{label:"邮箱"},{default:o(()=>[a(u,{modelValue:t(e).email,"onUpdate:modelValue":l[1]||(l[1]=n=>t(e).email=n),placeholder:"请输入你的邮箱"},null,8,["modelValue"])]),_:1}),a(d,{label:"头像"},{default:o(()=>[a(u,{type:"text",modelValue:t(e).avatar,"onUpdate:modelValue":l[3]||(l[3]=n=>t(e).avatar=n),placeholder:"请输入图片url或上传"},{append:o(()=>[a(g,{onClick:l[2]||(l[2]=n=>m.handleUpload("avatar")),name:"upload2"})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"性别"},{default:o(()=>[a(k,{modelValue:t(e).gender,"onUpdate:modelValue":l[4]||(l[4]=n=>t(e).gender=n),placeholder:"请选择性别"},{default:o(()=>[a(p,{label:"保密",value:0}),a(p,{label:"男",value:1}),a(p,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1}),a(d,{label:"描述"},{default:o(()=>[a(u,{modelValue:t(e).description,"onUpdate:modelValue":l[5]||(l[5]=n=>t(e).description=n),type:"textarea",autosize:{minRows:3,maxRows:12},placeholder:"个性描述"},null,8,["modelValue"])]),_:1})]),_:1})):S("",!0),a(c,{class:"mt-2",type:"primary",onClick:m.handleSave,loading:t(r)},{default:o(()=>[V(" 提交保存 ")]),_:1},8,["onClick","loading"]),R(a(U,{accept:"image/*",onUpload:m.uploadSuccess},{default:o(()=>[a(c,{type:"primary",id:"uploadRef"},{default:o(()=>[V("点击上传")]),_:1})]),_:1},8,["onUpload"]),[[z,!1]])]),_:1})}}});export{Q as default};
