import{d as E,j as w,x as S,r as f,c as v,w as o,o as V,e as t,b as a,P as h,g as b,s as C,f as R,i as N,m as B,a6 as F,n as I,bh as T}from"./index-a1081636.js";import{E as A}from"./card-3b4b2fb8.js";import{E as $,a as j,_ as q}from"./select-a7d8150e.js";import{n as z,s as D,E as M,a as O}from"./common-0a2c8a00.js";import"./tag-a1591f17.js";const P=R("h3",null,"站点信息",-1),W=E({__name:"user",setup(G){const c=w(),{user:e}=S(c),i=f(),r=f(!1),m={handleSave:async()=>{if(e.value){r.value=!0;const d=await N.update(e.value.id,e.value.account,e.value.nickname,e.value.email,e.value.gender,e.value.avatar,e.value.description);z(d),r.value=!1,d.code===200&&c.updateUser()}},handleUpload:d=>{i.value=d,document.querySelector("#uploadRef").click()},uploadSuccess:d=>{D(e,i.value,d)}};return(d,l)=>{const u=B,s=M,U=F,p=$,x=j,g=O,_=I,k=q,y=A;return V(),v(y,{class:"box-card cus-box-card",shadow:"hover"},{header:o(()=>[P]),default:o(()=>[t(e)?(V(),v(g,{key:0,style:{"max-width":"800px"}},{default:o(()=>[a(s,{label:"账号"},{default:o(()=>[a(u,{modelValue:t(e).account,"onUpdate:modelValue":l[0]||(l[0]=n=>t(e).account=n),placeholder:"请输入账号"},null,8,["modelValue"])]),_:1}),a(s,{label:"昵称"},{default:o(()=>[a(u,{modelValue:t(e).nickname,"onUpdate:modelValue":l[1]||(l[1]=n=>t(e).nickname=n),placeholder:"请输入昵称"},null,8,["modelValue"])]),_:1}),a(s,{label:"邮箱"},{default:o(()=>[a(u,{modelValue:t(e).email,"onUpdate:modelValue":l[2]||(l[2]=n=>t(e).email=n),placeholder:"请输入邮箱"},null,8,["modelValue"])]),_:1}),a(s,{label:"头像"},{default:o(()=>[a(u,{type:"text",modelValue:t(e).avatar,"onUpdate:modelValue":l[4]||(l[4]=n=>t(e).avatar=n),placeholder:"请输入图片url或上传"},{append:o(()=>[a(U,{onClick:l[3]||(l[3]=n=>m.handleUpload("avatar")),name:"upload2"})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"性别"},{default:o(()=>[a(x,{modelValue:t(e).gender,"onUpdate:modelValue":l[5]||(l[5]=n=>t(e).gender=n),placeholder:"请选择性别"},{default:o(()=>[a(p,{label:"保密",value:0}),a(p,{label:"男",value:1}),a(p,{label:"女",value:2})]),_:1},8,["modelValue"])]),_:1}),a(s,{label:"描述"},{default:o(()=>[a(u,{modelValue:t(e).description,"onUpdate:modelValue":l[6]||(l[6]=n=>t(e).description=n),type:"textarea",autosize:{minRows:3,maxRows:12},placeholder:"个性描述"},null,8,["modelValue"])]),_:1})]),_:1})):h("",!0),a(_,{class:"mt-2",type:"primary",onClick:m.handleSave,loading:t(r)},{default:o(()=>[b(" 提交保存 ")]),_:1},8,["onClick","loading"]),C(a(k,{accept:"image/*",onUpload:m.uploadSuccess},{default:o(()=>[a(_,{type:"primary",id:"uploadRef"},{default:o(()=>[b("点击上传")]),_:1})]),_:1},8,["onUpload"]),[[T,!1]])]),_:1})}}});export{W as default};
